---
title: Call analysis
subtitle: Summarize and evaluate calls automatically
slug: assistants/call-analysis
---

## Overview

Call analysis automatically summarizes and evaluates every call for insights and quality control. As soon as a call ends, analysis is triggered in the background and typically completes within a few seconds. The system uses the latest version of Anthropic's Claude Sonnet (with OpenAI GPT-4o as fallback) to:
- Summarize the call
- Extract structured data
- Evaluate call success

Results are attached to the call record and can be viewed in the call instance dashboard or retrieved via the API. You can customize the analysis using prompts and schemas in your assistant's `analysisPlan`.

## Minimum messages threshold

By default, call analysis runs for all calls regardless of length. However, you can configure a minimum threshold of messages that must be exchanged before analysis is triggered using the `minMessagesThreshold` parameter.

This is useful for filtering out very short calls (like hang-ups or wrong numbers) that may not provide meaningful insights for analysis.

### Configuration

Set the minimum messages threshold in your assistant's `analysisPlan`:

```json
{
  "analysisPlan": {
    "minMessagesThreshold": 5
  }
}
```

### Behavior

- **Messages count**: Both user and assistant messages count toward the threshold
- **Analysis skip**: If a call has fewer messages than the threshold, no analysis will be performed
- **Default value**: If not specified, analysis runs for all calls (effectively `minMessagesThreshold: 0`)
- **Call records**: Calls that don't meet the threshold will still appear in your call logs, but without analysis data

### Example scenarios

- `minMessagesThreshold: 1` - Analysis runs for calls with at least 1 message exchange
- `minMessagesThreshold: 3` - Analysis only runs for calls with 3+ messages (filtering out immediate hang-ups)
- `minMessagesThreshold: 10` - Analysis only runs for substantial conversations with 10+ messages

## Customization

You can customize the following properties in your assistant's `analysisPlan`:

### Summary prompt
- Used to create a concise summary of the call, stored in `call.analysis.summary`.
- **Default prompt:**
  ```text
  You are an expert note-taker. You will be given a transcript of a call. Summarize the call in 2-3 sentences, if applicable.
  ```
- **Customize:**
  ```json
  {
    "summaryPrompt": "Custom summary prompt text"
  }
  ```
- **Disable:**
  ```json
  {
    "summaryPrompt": ""
  }
  ```

### Structured data prompt
- Extracts specific data from the call, stored in `call.analysis.structuredData`.
- **Default prompt:**
  ```text
  You are an expert data extractor. You will be given a transcript of a call. Extract structured data per the JSON Schema.
  ```
- **Customize:**
  ```json
  {
    "structuredDataPrompt": "Custom structured data prompt text"
  }
  ```

### Structured data schema
- Defines the format of extracted data using JSON Schema.
- **Customize:**
  ```json
  {
    "structuredDataSchema": {
      "type": "object",
      "properties": {
        "field1": { "type": "string" },
        "field2": { "type": "number" }
      },
      "required": ["field1", "field2"]
    }
  }
  ```

### Success evaluation prompt
- Used to determine if the call was successful, stored in `call.analysis.successEvaluation`.
- **Default prompt:**
  ```text
  You are an expert call evaluator. You will be given a transcript of a call and the system prompt of the AI participant. Determine if the call was successful based on the objectives inferred from the system prompt.
  ```
- **Customize:**
  ```json
  {
    "successEvaluationPrompt": "Custom success evaluation prompt text"
  }
  ```
- **Disable:**
  ```json
  {
    "successEvaluationPrompt": ""
  }
  ```

### Success evaluation rubric
- Defines the criteria for evaluating call success. Options:
  - `NumericScale`: 1 to 10
  - `DescriptiveScale`: Excellent, Good, Fair, Poor
  - `Checklist`: List of criteria
  - `Matrix`: Grid of criteria and performance
  - `PercentageScale`: 0% to 100%
  - `LikertScale`: Strongly Agree to Strongly Disagree
  - `AutomaticRubric`: Auto breakdown by criteria
  - `PassFail`: true/false
- **Customize:**
  ```json
  {
    "successEvaluationRubric": "NumericScale"
  }
  ```

### Combine prompts and rubrics
- You can combine prompts and rubrics for detailed instructions:
  ```json
  {
    "successEvaluationPrompt": "Evaluate the call based on these criteria:...",
    "successEvaluationRubric": "Checklist"
  }
  ```

### Complete example with minimum threshold

Here's a complete example configuration that includes the minimum messages threshold along with other analysis settings:

```json
{
  "analysisPlan": {
    "minMessagesThreshold": 3,
    "summaryPrompt": "Provide a concise summary of this customer service call, highlighting key issues and resolutions.",
    "structuredDataPrompt": "Extract customer information and call outcomes from this transcript.",
    "structuredDataSchema": {
      "type": "object",
      "properties": {
        "customerName": { "type": "string" },
        "issueResolved": { "type": "boolean" },
        "followUpRequired": { "type": "boolean" }
      },
      "required": ["issueResolved"]
    },
    "successEvaluationPrompt": "Evaluate if this call successfully addressed the customer's needs.",
    "successEvaluationRubric": "PassFail"
  }
}
```

## Results

- Once analysis is complete, results are attached to the call record.
- View results in the call instance dashboard or retrieve them via the API.
- Results include:
  - Call summary
  - Structured data
  - Success evaluation and rubric
- Calls that don't meet the minimum messages threshold will not have analysis results

By customizing these properties, including the minimum messages threshold, you can tailor call analysis to your needs and gain valuable insights from meaningful conversations while filtering out noise from very short calls.
