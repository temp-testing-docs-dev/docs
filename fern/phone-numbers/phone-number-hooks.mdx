---
title: Phone Number Hooks
slug: phone-numbers/phone-number-hooks
---

# Phone Number Hooks

Phone number hooks allow you to configure actions that will be performed when specific events occur for calls associated with a particular phone number. This feature provides flexibility in handling various call scenarios and can be especially useful for customizing call routing, logging, or performing specific actions based on call events.

## Usage

Hooks are defined in the `hooks` array of a phone number configuration. Each hook consists of:

- `on`: The event that triggers the hook (supports `call.started`, `call.ended`, and `call.ringing`)
- `do`: The actions to perform when the hook triggers (supports `transfer`, `function`, and `say`)
- `filters`: Optional conditions that must be met for the hook to trigger

## Example: Log Call Start

This example shows how to log when a call starts using a custom function:

```bash
curl -X PATCH "https://api.vapi.ai/phone-number/<id>" \
     -H "Authorization: Bearer <auth>" \
     -H "Content-Type: application/json" \
     -d '{
  "hooks": [{
    "on": "call.started",
    "do": [{
      "type": "function",
      "function": {
        "name": "log_call_start",
        "parameters": {
          "type": "object",
          "properties": {
            "phone_number": {
              "type": "string",
              "value": "{{call.to}}"
            },
            "timestamp": {
              "type": "string",
              "value": "{{current_timestamp}}"
            }
          }
        },
        "description": "Logs the start of a call"
      },
      "async": true,
      "server": {
        "url": "https://your-server.com/api/log"
      }
    }]
  }]
}'
```

## Example: Transfer on Ringing

This example demonstrates how to transfer a call to a different number when it's ringing:

```bash
curl -X PATCH "https://api.vapi.ai/phone-number/<id>" \
     -H "Authorization: Bearer <auth>" \
     -H "Content-Type: application/json" \
     -d '{
  "hooks": [{
    "on": "call.ringing",
    "do": [{
      "type": "transfer",
      "destination": {
        "type": "number",
        "number": "+1234567890",
        "callerId": "{{call.from}}"
      }
    }]
  }]
}'
```

## Example: Say Message and End Call

This example shows how to say a message and end the call when it's ended for a specific reason:

```bash
curl -X PATCH "https://api.vapi.ai/phone-number/<id>" \
     -H "Authorization: Bearer <auth>" \
     -H "Content-Type: application/json" \
     -d '{
  "hooks": [{
    "on": "call.ended",
    "filters": [{
      "type": "oneOf",
      "key": "call.endedReason",
      "oneOf": ["no-answer"]
    }],
    "do": [
      {
        "type": "say",
        "exact": "We're sorry, but the call was not answered. Please try again later."
      },
      {
        "type": "function",
        "function": {
          "name": "end_call",
          "description": "Ends the current call"
        }
      }
    ]
  }]
}'
```

## Best Practices

1. Use hooks judiciously to avoid unnecessary complexity in call handling.
2. Ensure that your server endpoints can handle the volume of requests generated by hooks, especially for high-traffic phone numbers.
3. Implement proper error handling in your server-side functions to manage any issues that may arise during hook execution.
4. Test your hooks thoroughly in a non-production environment before deploying them to live phone numbers.
5. Monitor hook performance and adjust as necessary to optimize call handling and user experience.

By leveraging phone number hooks, you can create more dynamic and responsive call handling systems that adapt to various scenarios and provide a better experience for your users.